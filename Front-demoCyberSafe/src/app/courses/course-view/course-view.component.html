<app-top-bar></app-top-bar>
<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <link
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
    rel="stylesheet"
  />
  <link
    href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap"
    rel="stylesheet"
  />
</head>
<body>
  <div class="container">
    <!-- Loading Indicator -->
    <div *ngIf="loading" class="loading-container">
      <i class="fas fa-spinner fa-spin fa-3x"></i>
      <p>Cargando curso...</p>
    </div>

    <!-- Error Message -->
    <div *ngIf="error" class="error-container">
      <p>{{ error }}</p>
    </div>

    <!-- Course Content -->
    <div *ngIf="curso && !loading && !error">
      <div class="course-header">
        <span class="course-category">{{
          curso?.tipo_de_suscripcion || "Photography"
        }}</span>
        <span class="course-author"
          >by {{ curso?.nombre_profesor || "Ana López" }}</span
        >
      </div>

      <h1 class="course-title">{{ curso?.nombre }}</h1>

      <div class="course-meta">
        <span
          ><i class="fas fa-clock"></i>
          {{ curso?.duracion || "1 Semana" }}</span
        >
        <span
          ><i class="fas fa-users"></i>
          {{ curso?.numero_de_estudiantes | number }} Estudiantes</span
        >
        <span><i class="fas fa-signal"></i> Todos los niveles</span>
        <span
          ><i class="fas fa-video"></i> {{ curso?.numero_clases }} Clases</span
        >
        <span
          ><i class="fas fa-question-circle"></i>
          {{ curso?.numero_quizes }} Quizzes</span
        >
      </div>

      <div class="course-content">
        <div class="main-content">
          <!-- Tabs -->
          <div class="course-tabs">
            <div class="tab-buttons">
              <button
                [class.active]="activeTab === 'curriculum'"
                (click)="setActiveTab('curriculum')"
              >
                Curriculum
              </button>
              <button
                [class.active]="activeTab === 'overview'"
                (click)="setActiveTab('overview')"
              >
                Overview
              </button>
              <button
                [class.active]="activeTab === 'instructor'"
                (click)="setActiveTab('instructor')"
              >
                Instructor
              </button>
              <button
                [class.active]="activeTab === 'faqs'"
                (click)="setActiveTab('faqs')"
              >
                FAQs
              </button>
              <button
                [class.active]="activeTab === 'reviews'"
                (click)="setActiveTab('reviews')"
              >
                Reviews
              </button>
            </div>

            <div class="tab-content">
              <div *ngIf="activeTab === 'overview'" class="tab-content">
                <h2 class="tab-title">Descripcion</h2>
                <p class="course-description">
                  {{ curso?.descripcion || "No description available." }}
                </p>
              </div>
              <div *ngIf="activeTab === 'curriculum'">
                <p>Contenido del curriculum aquí (pendiente de implementar).</p>
              </div>
              <div *ngIf="activeTab === 'instructor'">
                <p>
                  <app-individual-instructor
                    [nombreProfesor]="curso!!.nombre_profesor"
                  ></app-individual-instructor>
                </p>
              </div>
              <div *ngIf="activeTab === 'faqs'">
                <p><app-individual-faqs></app-individual-faqs></p>
              </div>
              <div *ngIf="activeTab === 'reviews'">
                <p>
                  <app-individual-reviews
                    [nombre]="curso!!.nombre"
                  ></app-individual-reviews>
                </p>
              </div>
            </div>
          </div>

          <!-- Comments Section -->
          <div class="comments-section">
            <h2>Deja Un Comentario</h2>
            <p class="comment-note">
              Tu email no será publicado, nos ayudaría mucho tu opinión
            </p>

            <form
              class="comment-form"
              (ngSubmit)="onSubmitComment(commentForm.value)"
              #commentForm="ngForm"
            >
              <div class="form-row">
                <input
                  type="text"
                  placeholder="Name*"
                  ngModel
                  name="name"
                  required
                />
                <input
                  type="email"
                  placeholder="Email*"
                  ngModel
                  name="email"
                  required
                />
              </div>
              <textarea
                placeholder="Comment"
                ngModel
                name="comment"
                required
              ></textarea>
              <div class="form-checkbox">
                <input type="checkbox" id="save-info" ngModel name="saveInfo" />
                <label for="save-info">
                  Save my name, email in this browser for the next time I
                  comment
                </label>
              </div>
              <button type="submit" [disabled]="!commentForm.valid">
                Postear Comentario
              </button>
            </form>
          </div>
        </div>

        <!-- Sidebar -->
        <div class="sidebar">
          <div class="course-card">
            <img
              [src]="
                curso?.url_foto_curso ||
                'https://storage.googleapis.com/a1aa/image/fuCPzw2SEGk0Y3TWjD88JgwR9zTroucWKCdEz9JPGvQ.jpg'
              "
              [alt]="'Imagen del curso ' + (curso?.nombre || '')"
            />
            <div class="price-section">
              <span class="current-price">
                {{
                  curso?.precio === 0
                    ? "Gratis"
                    : (curso?.precio | currency : "USD" : "symbol" : "1.0-0")
                }}
              </span>
              <button class="enroll-button">Inicia Ahora</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
